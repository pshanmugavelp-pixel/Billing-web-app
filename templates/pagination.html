<!-- Reusable Pagination Component -->
<style>
    .pagination-container {
        display: flex;
        justify-content: space-between;
        align-items: center;
        margin: 20px 0;
        padding: 15px;
        background: #f8f9fa;
        border-radius: 5px;
        flex-wrap: wrap;
        gap: 15px;
    }
    
    .pagination-info {
        color: #666;
        font-size: 14px;
    }
    
    .pagination-controls {
        display: flex;
        gap: 10px;
        align-items: center;
        flex-wrap: wrap;
    }
    
    .pagination-buttons {
        display: flex;
        gap: 5px;
    }
    
    .pagination-btn {
        padding: 8px 12px;
        border: 1px solid #ddd;
        background: white;
        color: #333;
        text-decoration: none;
        border-radius: 3px;
        font-size: 14px;
        transition: all 0.3s;
        cursor: pointer;
    }
    
    .pagination-btn:hover:not(.disabled) {
        background: #667eea;
        color: white;
        border-color: #667eea;
    }
    
    .pagination-btn.active {
        background: #667eea;
        color: white;
        border-color: #667eea;
        font-weight: bold;
    }
    
    .pagination-btn.disabled {
        opacity: 0.5;
        cursor: not-allowed;
        pointer-events: none;
    }
    
    .page-size-selector {
        display: flex;
        align-items: center;
        gap: 8px;
    }
    
    .page-size-selector label {
        font-size: 14px;
        color: #666;
    }
    
    .page-size-selector select {
        padding: 6px 10px;
        border: 1px solid #ddd;
        border-radius: 3px;
        font-size: 14px;
        cursor: pointer;
    }
    
    @media print {
        .pagination-container {
            display: none !important;
        }
    }
</style>

<div class="pagination-container no-print">
    <div class="pagination-info">
        {% if total_count > 0 %}
            Showing {{ ((page - 1) * per_page) + 1 }} to {{ [page * per_page, total_count]|min }} of {{ total_count }} entries
        {% else %}
            No entries to display
        {% endif %}
    </div>
    
    <div class="pagination-controls">
        <!-- Page Size Selector -->
        <div class="page-size-selector">
            <label for="perPageSelect">Show:</label>
            <select id="perPageSelect" onchange="changePageSize(this.value)">
                <option value="10" {% if per_page == 10 %}selected{% endif %}>10</option>
                <option value="20" {% if per_page == 20 %}selected{% endif %}>20</option>
                <option value="50" {% if per_page == 50 %}selected{% endif %}>50</option>
                <option value="100" {% if per_page == 100 %}selected{% endif %}>100</option>
            </select>
        </div>
        
        <!-- Pagination Buttons -->
        <div class="pagination-buttons">
            <!-- First Page -->
            <a href="{{ url_for(route_name, page=1, per_page=per_page, **extra_params) }}"
               class="pagination-btn {% if not has_prev %}disabled{% endif %}">
                ⏮ First
            </a>
            
            <!-- Previous Page -->
            <a href="{{ url_for(route_name, page=page-1, per_page=per_page, **extra_params) }}"
               class="pagination-btn {% if not has_prev %}disabled{% endif %}">
                ← Prev
            </a>
            
            <!-- Page Numbers -->
            {% set start_page = [1, page - 2]|max %}
            {% set end_page = [total_pages, page + 2]|min %}
            
            {% if start_page > 1 %}
                <a href="{{ url_for(route_name, page=1, per_page=per_page, **extra_params) }}" class="pagination-btn">1</a>
                {% if start_page > 2 %}
                    <span class="pagination-btn disabled">...</span>
                {% endif %}
            {% endif %}
            
            {% for p in range(start_page, end_page + 1) %}
                <a href="{{ url_for(route_name, page=p, per_page=per_page, **extra_params) }}"
                   class="pagination-btn {% if p == page %}active{% endif %}">
                    {{ p }}
                </a>
            {% endfor %}
            
            {% if end_page < total_pages %}
                {% if end_page < total_pages - 1 %}
                    <span class="pagination-btn disabled">...</span>
                {% endif %}
                <a href="{{ url_for(route_name, page=total_pages, per_page=per_page, **extra_params) }}" class="pagination-btn">{{ total_pages }}</a>
            {% endif %}
            
            <!-- Next Page -->
            <a href="{{ url_for(route_name, page=page+1, per_page=per_page, **extra_params) }}"
               class="pagination-btn {% if not has_next %}disabled{% endif %}">
                Next →
            </a>
            
            <!-- Last Page -->
            <a href="{{ url_for(route_name, page=total_pages, per_page=per_page, **extra_params) }}"
               class="pagination-btn {% if not has_next %}disabled{% endif %}">
                Last ⏭
            </a>
        </div>
    </div>
</div>

<script>
    function changePageSize(newSize) {
        const url = new URL(window.location.href);
        url.searchParams.set('per_page', newSize);
        url.searchParams.set('page', '1'); // Reset to first page
        window.location.href = url.toString();
    }
</script>